using System.Text;

string path = "путь к файлу";
string start = "началоо блока";
string end = "конец блока";


byte[] expectedStart = Encoding.UTF8.GetBytes(start);
byte[] expectedEnd = Encoding.UTF8.GetBytes(end);
using Stream stream = File.OpenRead(path);

long index = 0;
bool isStart = true;
long length = stream.Length;
List<long> indexs = new();
while (length >= index)
{
    int ch = stream.ReadByte();
    int expectedCh = isStart ? expectedStart[0] : expectedEnd[0];
    if (ch == expectedCh)
    {
        stream.Position = index;
        Span<byte> chars = new(new byte[isStart ? expectedStart.Length : expectedEnd.Length]);
        int read = stream.Read(chars);

        bool isEarly = true;
        byte[] expected = isStart ? expectedStart : expectedEnd;
        for (int i = 0; i < chars.Length; i++)
        {
            if (expected[i] != chars[i])
            {
                isEarly = false;
                break;
            }
        }

        if (!isEarly)
        {
            stream.Position = ++index;
            continue;
        }

        indexs.Add(isStart ? index : index + expectedEnd.Length);
        isStart = !isStart;
    }

    index++;
}

List<string> source = new();
for (int i = 0; i < indexs.Count; i += 2)
{
    Span<byte> bytes = new(new byte[indexs[i + 1] - indexs[i]]);
    stream.Position = indexs[i];
    int read = stream.Read(bytes);
    source.Add(Encoding.UTF8.GetString(bytes));
}
